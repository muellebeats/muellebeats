<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muelle Beats Dashboard</title>
    <link rel="stylesheet" href="./assets/css/dashboard-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard">
        <aside class="sidebar">
            <h1>Muelle Beats</h1>
            <nav>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#my-tracks">My Tracks</a></li>
                    <li><a href="#community">Community</a></li>
                    <li><a href="#call">Agendar Llamada</a></li>
                </ul>
            </nav>
            <button class="btn" onclick="logout()">Logout</button>
        </aside>

        <main class="main-content">
            <header>
                <h2>¡Bienvenido, Usuario!</h2>
            </header>
            <section id="overview" class="cards">
                <div class="card">
                    <h3>42</h3>
                    <p>Tareas Activas</p>
                    <button>Ver Detalles</button>
                </div>
                <div class="card">
                    <h3>21</h3>
                    <p>Reseñas de Clientes</p>
                </div>
            </section>

            <section id="my-tracks">
                <h2>My Tracks</h2>
                <p>Aquí podrás subir y gestionar tus pistas.</p>
                <button class="btn">Subir Nueva Pista</button>
            </section>

            <section id="community">
                <h2>Community</h2>
                <p>Conecta con creadores de toda América Latina, México y España.</p>
                <a href="https://t.me/+8cg12FtioyAxOWMx" target="_blank" class="btn">Únete en Telegram</a>
            </section>

            <section id="call">
                <h2>Agendar una llamada 1:1</h2>
                <form id="agendaForm">
                    <label for="fecha">Selecciona una fecha:</label>
                    <input type="date" id="fecha" required><br>
                    <label for="hora">Selecciona un horario:</label>
                    <input type="time" id="hora" required><br>
                    <button type="submit" class="btn">Agendar</button>
                </form>
            </section>

            <section id="chart-section" class="chart-section">
                <h3>Revenue Forecast</h3>
                <canvas id="revenueChart"></canvas>
            </section>
        </main>
    </div>

    <script>
        // Configuración del gráfico
        const ctx = document.getElementById('revenueChart').getContext('2d');
        const revenueChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio'],
                datasets: [{
                    label: 'Ingresos',
                    data: [1000, 2000, 3000, 4000, 5000, 6000],
                    backgroundColor: ['#6C63FF', '#FF6B6B', '#FFD93D', '#6BCB77', '#4D96FF', '#845EC2']
                }]
            },
            options: {
                plugins: {
                    legend: { display: false },
                }
            }
        });

        // Envío del formulario a Telegram
        document.getElementById("agendaForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const fecha = document.getElementById("fecha").value;
            const hora = document.getElementById("hora").value;

            if (!fecha || !hora) {
                alert("Por favor selecciona una fecha y un horario.");
                return;
            }

            const message = `Nueva solicitud de llamada 1:1\nFecha: ${fecha}\nHora: ${hora}`;
            const url = `https://api.telegram.org/bot7612936738:AAHUa8exFi8XHQHQOatCmx4NyHawJxzIzU/sendMessage?chat_id=7384706778&text=${encodeURIComponent(message)}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                        alert("Solicitud enviada con éxito.");
                    } else {
                        alert("Hubo un error al enviar la solicitud. Por favor intenta nuevamente.");
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                    alert("Hubo un error al enviar la solicitud. Por favor intenta nuevamente.");
                });
        });

        function logout() {
            window.location.href = "auth.html";
        }
    </script>
</body>
</html>
